<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>My Orders | Sabjiwala</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 min-h-screen font-sans">

  <!-- Navbar -->
  <%- include('partials/navbar') %>

  <!-- Main Content -->
  <main class="flex-grow w-full px-3 sm:px-6 lg:px-8 py-6 sm:py-10 lg:max-w-6xl mx-auto">
    
    <!-- Page Heading -->
    <h1 class="text-2xl sm:text-3xl font-extrabold text-green-700 mb-6 sm:mb-8">
      ðŸ“¦ My Orders
    </h1>

    <% if (orders.length === 0) { %>
      <p class="text-gray-600 text-base sm:text-lg">You have no orders yet.</p>
    <% } else { %>
      <% orders.forEach(order => { %>
        
        <!-- Order Card -->
        <div class="bg-white shadow-md sm:shadow-lg rounded-lg mb-6 sm:mb-8 border w-full">
          
          <!-- Order Header -->
          <div class="flex flex-col sm:flex-row justify-between gap-2 sm:items-center bg-green-50 px-4 sm:px-6 py-3 sm:py-4 border-b">
            <div class="text-sm sm:text-base">
              <span class="font-semibold text-gray-700">Order ID:</span>
              <span class="text-gray-900"><%= order._id %></span>
            </div>
            <div class="text-xs sm:text-sm text-gray-500">
              Placed on: <%= order.createdAt.toLocaleString() %>
            </div>
          </div>

          <!-- Order Items Table -->
          <div class="overflow-x-auto">
            <table class="w-full text-xs sm:text-sm text-left min-w-[500px]">
              <thead class="bg-green-100 text-gray-800">
                <tr>
                  <th class="px-4 sm:px-6 py-2 sm:py-3">Product</th>
                  <th class="px-4 sm:px-6 py-2 sm:py-3">Vendor</th>
                  <th class="px-4 sm:px-6 py-2 sm:py-3">Price</th>
                  <th class="px-4 sm:px-6 py-2 sm:py-3">Qty</th>
                  <th class="px-4 sm:px-6 py-2 sm:py-3">Subtotal</th>
                </tr>
              </thead>
              <tbody>
                <% order.items.forEach(item => { %>
                  <tr class="border-b hover:bg-green-50">
                    <td class="px-4 sm:px-6 py-2 sm:py-3"><%= item.product?.name || 'Deleted Product' %></td>
                    <td class="px-4 sm:px-6 py-2 sm:py-3"><%= item.vendor?.shopName || item.vendor?.name || 'N/A' %></td>
                    <td class="px-4 sm:px-6 py-2 sm:py-3">â‚¹<%= item.price %></td>
                    <td class="px-4 sm:px-6 py-2 sm:py-3"><%= item.qty %></td>
                    <td class="px-4 sm:px-6 py-2 sm:py-3 font-semibold text-green-700">
                      â‚¹<%= item.qty * item.price %>
                    </td>
                  </tr>
                <% }) %>
              </tbody>
            </table>
          </div>

          <!-- Order Total -->
          <div class="flex justify-end px-4 sm:px-6 py-3 sm:py-4 border-t">
            <span class="text-base sm:text-lg font-bold text-green-700">
              Total: â‚¹<%= order.total %>
            </span>
          </div>

        </div>
      <% }) %>
    <% } %>
  </main>

  <!-- Footer -->
  <%- include('partials/footer') %>
</body>
</html>
// Best
