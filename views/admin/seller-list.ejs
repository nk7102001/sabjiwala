<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Seller List - Admin</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 min-h-screen flex flex-col font-sans">

  <!-- ✅ Navbar -->
  <%- include('../partials/navbar') %>

  <!-- Main Content -->
  <main class="flex-grow w-full px-3 sm:px-6 lg:px-8 py-6 sm:py-10" role="main" aria-labelledby="pageTitle">

    <!-- Page Title -->
    <h1 id="pageTitle" class="text-2xl sm:text-3xl font-extrabold text-green-700 mb-6">
      All Sellers
    </h1>

    <!-- Responsive Table Wrapper -->
    <div class="bg-white shadow-md rounded-lg overflow-x-auto">
      <% const _sellers = Array.isArray(sellers) ? sellers : []; %>
      <table class="w-full min-w-[700px] text-left">
        <thead>
          <tr class="bg-green-100 text-gray-800">
            <th class="px-4 py-2">Name</th>
            <th class="px-4 py-2">Email</th>
            <th class="px-4 py-2">Shop</th>
            <th class="px-4 py-2">Status</th>
            <th class="px-4 py-2">Actions</th>
          </tr>
        </thead>
        <tbody>
          <% if (_sellers.length === 0) { %>
            <tr>
              <td colspan="5" class="px-4 py-6 text-center text-gray-500">No sellers found</td>
            </tr>
          <% } else { %>
            <% _sellers.forEach((seller) => { %>
              <tr class="border-b hover:bg-green-50">
                <td class="px-4 py-2 text-sm sm:text-base"><%= seller.name || '' %></td>
                <td class="px-4 py-2 text-sm sm:text-base break-words"><%= seller.email || '' %></td>
                <td class="px-4 py-2 text-sm sm:text-base"><%= seller.shopName || '' %></td>
                <td class="px-4 py-2 font-semibold
                    <%= seller.status === 'Pending'
                          ? 'text-yellow-600'
                          : seller.status === 'Approved'
                          ? 'text-green-600'
                          : 'text-red-600' %>">
                  <%= seller.status || 'Pending' %>
                </td>
                <td class="px-4 py-2 flex flex-wrap gap-2">
                  <% if (seller.status === 'Pending') { %>
                    <form action="/admin/sellers/<%= seller._id %>/approve" method="POST">
                      <button class="bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700 text-sm">
                        Approve
                      </button>
                    </form>
                    <form action="/admin/sellers/<%= seller._id %>/reject" method="POST">
                      <button class="bg-red-600 text-white px-3 py-1 rounded hover:bg-red-700 text-sm">
                        Reject
                      </button>
                    </form>
                  <% } else { %>
                    <span class="text-gray-500 text-sm">No actions</span>
                  <% } %>
                </td>
              </tr>
            <% }) %>
          <% } %>
        </tbody>
      </table>
    </div>

  </main>

  <!-- ✅ Footer -->
  <%- include('../partials/footer') %>

</body>
</html>
