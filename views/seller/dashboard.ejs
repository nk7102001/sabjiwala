<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Seller Dashboard | Sabjiwala</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen flex flex-col font-sans">

  <!-- Navbar -->
  <%- include('../partials/navbar') %>

  <!-- Main Content -->
  <main class="flex-grow max-w-7xl mx-auto p-6 w-full" role="main">

    <!-- Welcome Seller -->
    <div class="bg-gradient-to-r from-green-600 to-green-400 p-6 rounded-lg shadow-lg mb-8">
      <h1 class="text-3xl font-extrabold text-white">
        Welcome back, <%= (seller && seller.name) ? seller.name : 'Seller' %> ðŸ‘‹
      </h1>
      <p class="text-green-50 mt-1 text-sm">
        Manage your store, track your performance, and grow your business ðŸš€
      </p>
    </div>

    <!-- Quick Action Cards -->
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
      <a href="/seller/products/add" class="group bg-white hover:bg-green-50 p-6 rounded-xl shadow-md hover:shadow-xl transition border border-gray-100 text-center">
        <div class="text-4xl mb-3 group-hover:scale-110 transform transition">âž•</div>
        <h3 class="text-lg font-semibold text-gray-800">Add Product</h3>
        <p class="text-gray-500 text-sm mt-2">List new products for your customers</p>
      </a>
      <a href="/seller/products" class="group bg-white hover:bg-blue-50 p-6 rounded-xl shadow-md hover:shadow-xl transition border border-gray-100 text-center">
        <div class="text-4xl mb-3 group-hover:scale-110 transform transition">ðŸ“¦</div>
        <h3 class="text-lg font-semibold text-gray-800">View/Edit Products</h3>
        <p class="text-gray-500 text-sm mt-2">Manage your product listings easily</p>
      </a>
      <a href="/seller/analytics" class="group bg-white hover:bg-purple-50 p-6 rounded-xl shadow-md hover:shadow-xl transition border border-gray-100 text-center">
        <div class="text-4xl mb-3 group-hover:scale-110 transform transition">ðŸ“Š</div>
        <h3 class="text-lg font-semibold text-gray-800">View Analytics</h3>
        <p class="text-gray-500 text-sm mt-2">Track sales, orders & performance</p>
      </a>
      <a href="/seller-logout" class="group bg-white hover:bg-red-50 p-6 rounded-xl shadow-md hover:shadow-xl transition border border-gray-100 text-center">
        <div class="text-4xl mb-3 group-hover:scale-110 transform transition">ðŸšª</div>
        <h3 class="text-lg font-semibold text-gray-800">Logout</h3>
        <p class="text-gray-500 text-sm mt-2">Securely exit your seller account</p>
      </a>
    </div>

    <!-- Orders Section -->
    <div class="mt-14 bg-white p-6 rounded-lg shadow-md border border-gray-200">
      <h2 class="text-2xl font-semibold mb-4 text-gray-800">Your Active Orders</h2>
      <% const _orders = Array.isArray(orders) ? orders : []; %>
      <% if (_orders.length === 0) { %>
        <p class="text-gray-500">No active orders yet.</p>
      <% } else { %>
        <ul class="divide-y divide-gray-200">
          <% _orders.forEach((order) => { %>
            <li class="py-4">
              <div class="flex justify-between items-center">
                <span class="text-gray-700">
                  <b>Order ID:</b> <%= order._id %> |
                  <b>Status:</b> <%= order.status %>
                </span>
                <% if (order.status === 'Pending' || order.status === 'Processing') { %>
                  <form method="POST" action="/vendor/order/<%= order._id %>/packed" style="display:inline;">
                    <button type="submit" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-semibold transition">
                      Mark as Packed
                    </button>
                  </form>
                <% } else { %>
                  <span class="text-green-700 font-semibold">Packed</span>
                <% } %>
              </div>

              <!-- ITEMS IN ORDER -->
              <div class="mt-2 ml-2">
                <p class="font-semibold text-gray-600 mb-1">Items to pack:</p>
                <% const _items = Array.isArray(order.items) ? order.items : []; %>
                <% if (_items.length === 0) { %>
                  <p class="text-gray-500 text-sm">No items found for this order.</p>
                <% } else { %>
                  <ul class="list-disc ml-5 text-gray-700 text-sm">
                    <% _items.forEach((item) => { %>
                      <li>
                        <b><%= item.name %></b> â€” <%= item.qty %> Kg | â‚¹<%= item.price %>
                      </li>
                    <% }) %>
                  </ul>
                <% } %>
              </div>
            </li>
          <% }) %>
        </ul>
      <% } %>
    </div>

  </main>

  <!-- Footer -->
  <%- include('../partials/footer') %>

</body>
</html>
